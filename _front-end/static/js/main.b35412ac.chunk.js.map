{"version":3,"sources":["serviceWorker.ts","models/follow-model.ts","config.ts","api/axios.ts","redux/action-type.ts","redux/store.ts","redux/reducer.ts","redux/app-state.ts","services/auth.ts","components/nav-bar/navBar.tsx","components/home/home.tsx","models/user-model.ts","services/user-validation.ts","components/registration/registration.tsx","components/login/login.tsx","components/admin/admin.tsx","services/date.ts","services/vacation-validation.ts","components/edit-vacation/editVacation.tsx","models/vacation-model.ts","components/add-vacation/addVacation.tsx","components/reports/reports.tsx","services/color.ts","components/purchase/purchase.tsx","components/purchases/purchases.tsx","components/app/app.tsx","index.tsx"],"names":["Boolean","window","location","hostname","match","FollowModel","followId","userName","vacationId","Config","serverUrl","_initialize","axios","ActionType","create","baseURL","headers","withCredentials","store","createStore","oldAppState","action","newAppState","type","SaveAllFollows","follows","payload","SaveAllVacations","vacations","saveToken","token","saveAllPurchases","purchases","saveUser","user","isLoggedIn","saveOneVacation","i","isFollow","addOneVacation","push","deleteOneVacation","filter","v","AddFollow","RemoveFollow","f","setFollowsPerVacation","counter","forEach","sortVacations","isNotFollow","concat","addPurchase","cookies","Cookies","this","get","props","getState","pathname","alert","history","isAdmin","disconnect","a","console","log","remove","dispatch","errorHandling","error","response","data","NavBar","logOut","state","className","to","exact","Button","onClick","Component","withRouter","Home","unsubscribeStore","socket","getComponentData","length","axiosPrivate","addFollow","followToAdd","post","followAdded","emit","removeFollow","followToRemove","find","delete","io","connect","subscribe","setState","map","Card","key","Img","variant","src","img","Body","color","size","Title","destination","Text","description","ListGroup","ListGroupItem","Date","startingDate","toDateString","endingDate","price","UserModel","firstName","lastName","password","validateUserName","validatePassword","Registration","setUserName","args","nameError","target","value","usersNames","validateAvailableUserName","errors","userNameError","setFirstName","validateFirstName","firstNameError","setLastName","validateLastName","lastNameError","setPassword","passwordError","verifyPasswordUser","verifyPassword","verifyPasswordError","isFormLegal","prop","toString","register","accessToken","set","path","maxAge","getAllUsersNames","name","id","placeholder","onChange","disabled","Login","login","e","preventDefault","onSubmit","Admin","getDataWithAjax","JsonToString","date","d","setDate","getDate","toISOString","split","StringToJson","setHours","toJSON","validateDescription","validateDestination","validatePrice","EditVacation","setDescription","descriptionError","vacation","setDestination","destinationError","onFileChange","file","files","setImgUrl","fileName","imgError","setStartingDate","startingDateError","setEndingDate","endingDateError","setPrice","priceError","update","formData","FormData","append","vacationToUpdate","put","params","Form","Group","controlId","Label","Control","VacationModel","AddVacation","add","addedVacation","Reports","updateGraphState","vacationsDestinations","vacationsFollows","colors","r","Math","floor","random","g","b","getRandomColor","labels","datasets","label","backgroundColor","options","scales","yAxes","ticks","beginAtZero","userCallback","index","Purchase","purchase","priceForTicket","setAmountOfTickets","tickets","totalPrice","send","dateNow","Header","alt","pattern","onInput","bind","Purchases","getComponentDataWithAxios","p","Table","striped","bordered","hover","purchaseId","App","reqInterceptor","req","resInterceptor","res","resErrInterceptor","err","config","url","prevRequest","newAccessToken","interceptors","request","use","on","vacationUpdated","vacationAdded","vacationRemoved","render","ReactDOM","StrictMode","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","message"],"mappings":"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","file":"static/js/main.b35412ac.chunk.js","sourcesContent":["// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","export class FollowModel {\r\n\r\n    public constructor( // Compiler Magic\r\n        public followId?: number,\r\n        public userName?: string,\r\n        public vacationId?: number) {\r\n    }\r\n}\r\n\r\n","export class Config{\r\n\r\n    public static serverUrl;\r\n\r\n    public static _initialize(){\r\n        if(process.env.NODE_ENV === \"production\"){\r\n            Config.serverUrl=\"https://itay-vacations.herokuapp.com\";\r\n        }\r\n\r\n        else{\r\n            Config.serverUrl=\"http://localhost:3000\";\r\n        }\r\n    }\r\n\r\n\r\n}\r\n\r\nConfig._initialize();","import axios from \"axios\";\r\nimport { Config } from \"../config\";\r\n\r\n\r\nexport default axios.create({\r\n    baseURL: Config.serverUrl\r\n});\r\n\r\nexport const axiosPrivate=axios.create({\r\n    baseURL: Config.serverUrl,\r\n    headers: {\"Content-Type\":\"application/json\"},\r\n    withCredentials: true\r\n});\r\n\r\n\r\n\r\n","export enum ActionType {\r\n    SaveAllVacations,\r\n    SaveAllFollows,\r\n    saveAllPurchases,\r\n    saveToken,\r\n    saveUser,\r\n    setFollowsPerVacation,\r\n    sortVacations,\r\n    saveOneVacation,\r\n    addOneVacation,\r\n    deleteOneVacation,\r\n    AddFollow,\r\n    RemoveFollow,\r\n    addPurchase\r\n}\r\n","import { createStore } from \"redux\";\r\nimport { reduce } from \"./reducer\";\r\nimport { AppState } from \"./app-state\";\r\n\r\nexport const store = createStore(reduce, new AppState());\r\n\r\n","import { AppState } from \"./app-state\";\r\nimport { Action } from \"./action\";\r\nimport { ActionType } from \"./action-type\";\r\nexport function reduce(oldAppState: AppState, action: Action): AppState {\r\n\r\n    const newAppState = { ...oldAppState }; // Duplicate the old state into a new state.\r\n\r\n    switch (action.type) {\r\n\r\n\r\n        case ActionType.SaveAllFollows:\r\n            newAppState.follows = action.payload;\r\n            break;\r\n\r\n        case ActionType.SaveAllVacations:\r\n            newAppState.vacations = action.payload;\r\n            break;\r\n\r\n        case ActionType.saveToken:\r\n            newAppState.token = action.payload;\r\n            break;\r\n\r\n        case ActionType.saveAllPurchases:\r\n            newAppState.purchases = action.payload;\r\n            break;\r\n\r\n        case ActionType.saveUser:\r\n            newAppState.user = action.payload;\r\n            newAppState.isLoggedIn = action.payload? true : false;\r\n            break;\r\n\r\n        case ActionType.saveOneVacation:\r\n\r\n            for (let i in newAppState.vacations) {\r\n                if (newAppState.vacations[i].vacationId === action.payload.vacationId) {\r\n                    const follows = newAppState.vacations[i].follows;\r\n                    const isFollow = newAppState.vacations[i].isFollow;\r\n                    newAppState.vacations[i] = action.payload;\r\n                    newAppState.vacations[i].follows = follows;\r\n                    newAppState.vacations[i].isFollow = isFollow;\r\n\r\n                }\r\n            }\r\n\r\n            break;\r\n\r\n        case ActionType.addOneVacation:\r\n            newAppState.vacations.push(action.payload);\r\n            break;\r\n\r\n        case ActionType.deleteOneVacation:\r\n            // for(let i in newAppState.vacations){\r\n            newAppState.vacations = newAppState.vacations.filter(v => v.vacationId !== action.payload );\r\n            break;\r\n\r\n        case ActionType.AddFollow:\r\n            newAppState.follows.push(action.payload);\r\n            break;\r\n\r\n        case ActionType.RemoveFollow:\r\n            // for(let i in newAppState.vacations){\r\n            newAppState.follows = newAppState.follows.filter(f =>  f.followId !== action.payload );\r\n            break;\r\n\r\n        case ActionType.setFollowsPerVacation:\r\n            //add per vacation number of followers and if the user is following\r\n            let counter = 0;\r\n            newAppState.vacations.forEach((v) => {\r\n                v.isFollow = false;\r\n                newAppState.follows.forEach((f) => {\r\n                    if (f.vacationId === v.vacationId) {\r\n                        counter++;\r\n                        if (f.userName === newAppState.user.userName) {\r\n                            v.isFollow = true;\r\n                        }\r\n                    }\r\n                });\r\n                v.follows = counter;\r\n                counter = 0;\r\n            });\r\n            break;\r\n\r\n\r\n        case ActionType.sortVacations:\r\n            //sort array by followed vacations first\r\n            const isFollow = newAppState.vacations.filter((v) => v.isFollow === true);\r\n            const isNotFollow = newAppState.vacations.filter((v) => v.isFollow === false);\r\n            newAppState.vacations = isFollow.concat(isNotFollow);\r\n\r\n            break;\r\n\r\n        case ActionType.addPurchase:\r\n            newAppState.purchases.push(action.payload);\r\n            break;\r\n\r\n        default: break;\r\n    }\r\n\r\n    return newAppState;\r\n}","import { PurchaseModel } from './../models/purchase-model';\r\nimport { VacationModel } from \"../models/vacation-model\";\r\nimport { FollowModel } from \"../models/follow-model\";\r\nimport { UserModel } from \"../models/user-model\";\r\nimport Cookies from 'universal-cookie';\r\n\r\nexport class AppState {\r\n    \r\n    public vacations: VacationModel[];\r\n    public follows: FollowModel[];\r\n    public purchases: PurchaseModel[];\r\n    public user: UserModel;\r\n    public token: string;\r\n    public isLoggedIn: boolean;\r\n\r\n    public constructor() {\r\n        const cookies = new Cookies();\r\n\r\n        this.vacations = [];\r\n        this.follows=[];\r\n        this.purchases=[];\r\n\r\n        this.user=cookies.get('user');\r\n        this.isLoggedIn= this.user? true :false;\r\n\r\n        this.token=null;\r\n    }\r\n}","// import axios, { AxiosError } from \"axios\";\r\nimport { AxiosError } from \"axios\";\r\nimport axios from \"../api/axios\";\r\nimport privateAxios from \"../api/axios\";\r\nimport { store } from \"../redux/store\";\r\nimport { ActionType } from \"../redux/action-type\";\r\nimport Cookies from 'universal-cookie';\r\n\r\n\r\n\r\nexport async function refreshToken() {\r\n    try {\r\n        const response = await privateAxios.get(\"/api/auth/refresh\", { withCredentials: true });\r\n        store.dispatch({ type: ActionType.saveToken, payload: response.data.accessToken });\r\n        return response.data;\r\n    }\r\n\r\n    catch (error) {\r\n        if ((error as AxiosError).response?.data === \"Your login session has expired\") {\r\n            console.log(\"Your login session has expired\");\r\n            return;\r\n        }\r\n\r\n        else {\r\n            console.log(\"refresh err\");\r\n            alert((error as AxiosError).response?.data);\r\n        }\r\n    }\r\n}\r\n\r\nexport function isLoggedIn(props): boolean {\r\n    //if not loggedIn, navigate to the login page\r\n    if (!store.getState().isLoggedIn) {\r\n        if(props.location.pathname!==\"/\")\r\n            alert(\"Error: You are not logged-in\");\r\n        props.history.push(\"/login\");\r\n        return false;\r\n    }\r\n    else {\r\n        return true;\r\n    }\r\n}\r\n\r\nexport function isAdmin(props): boolean {\r\n    //if user is not admin, navigate to the Home page\r\n    if (!store.getState().user?.isAdmin) {\r\n        alert(\"Error: You are not admin\");\r\n        props.history.push(\"/\");\r\n        return false;\r\n    }\r\n    else {\r\n        return true;\r\n    }\r\n}\r\n\r\nexport async function disconnect() {\r\n    try {\r\n        console.log(\"disconnect\");\r\n        await axios.get(\"/api/auth/logout\", { withCredentials: true });\r\n        const cookies = new Cookies();\r\n        cookies.remove('user');\r\n\r\n        store.dispatch({ type: ActionType.saveUser, payload: null });\r\n        store.dispatch({ type: ActionType.saveToken, payload: null });\r\n\r\n    } catch (error) {\r\n        alert(error);\r\n    }\r\n}\r\n\r\nexport async function errorHandling(error, props) {\r\n\r\n    if (!error) return;\r\n\r\n    if (error === \"Error: Network Error\") {\r\n        alert(error);\r\n        return;\r\n    }\r\n\r\n    if ((error as AxiosError).response?.data === \"You are not logged-in\") {\r\n        await disconnect();\r\n        alert(\"Error: You are not logged-in\");\r\n        props.history.push(\"/login\");\r\n        return;\r\n    }\r\n\r\n    if ((error as AxiosError).response?.data === \"Your login session has expired\") {\r\n        await disconnect();\r\n        alert(\"Error: Your login session has expired\");\r\n        props.history.push(\"/login\");\r\n        return;\r\n    }\r\n\r\n    if ((error as AxiosError).response?.data === \"You are not admin!\") {\r\n        await disconnect();\r\n        alert(\"Error: You are not admin!\");\r\n        props.history.push(\"/login\");\r\n        return;\r\n    }\r\n\r\n    if ((error as AxiosError).response?.data === \"Illegal username or password\") {\r\n        alert(\"Error: Illegal username or password\");\r\n        return;\r\n    }\r\n\r\n\r\n    alert((error as AxiosError).response?.data);\r\n\r\n}","import React, { Component } from \"react\";\r\nimport \"./navBar.css\";\r\nimport Button from 'react-bootstrap/Button';\r\nimport { NavLink } from \"react-router-dom\";\r\nimport { UserModel } from \"../../models/user-model\";\r\nimport { store } from \"../../redux/store\";\r\nimport { disconnect } from \"../../services/auth\"\r\nimport { withRouter } from 'react-router-dom';\r\n\r\ninterface userState {\r\n    user: UserModel\r\n}\r\n\r\n\r\nclass NavBar extends Component<any, userState>{\r\n\r\n    public constructor(props: any) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            user: store.getState().user\r\n        }\r\n    }\r\n\r\n    private logOut =async () => {\r\n        await disconnect();\r\n        this.props.history.push(\"/login\");\r\n    }\r\n\r\n    public render() {\r\n        return (\r\n            <div className=\"nav-bar\">\r\n                <div className=\"nav-container\">\r\n                    <nav>\r\n                        {this.state.user?.isAdmin ? (\r\n                            <ul>\r\n                                <li>\r\n                                    <NavLink to=\"/\" exact>Home</NavLink>\r\n                                </li>\r\n                                <li>\r\n                                    <NavLink to=\"/admin\" exact> Edit Vacation </NavLink>\r\n                                </li>\r\n                                <li>\r\n                                    <NavLink to=\"/admin/add\" exact> Add Vacation</NavLink>\r\n                                </li>\r\n                                <li>\r\n                                    <NavLink to=\"/purchases\" exact> Purchases</NavLink>\r\n                                </li>\r\n                                <li>\r\n                                    <NavLink to=\"/reports\" exact> Reports </NavLink>\r\n                                </li>\r\n                            </ul>\r\n                        ) :\r\n                            <ul>\r\n                                <li>\r\n                                    <NavLink to=\"/\" exact>Home</NavLink>\r\n                                </li>\r\n                            </ul>\r\n\r\n                        }\r\n                        <div className=\"user\">\r\n                            <div> Hello {this.state.user?.userName} </div>\r\n\r\n                            <div>\r\n                                <Button onClick={this.logOut}>Log out</Button>\r\n                            </div>\r\n                        </div>\r\n\r\n\r\n                    </nav>\r\n\r\n                </div>\r\n                <div className=\"space\">\r\n\r\n                </div>\r\n            </div>\r\n\r\n\r\n\r\n        )\r\n    }\r\n}\r\n\r\nexport default withRouter(NavBar);","import React, { Component } from \"react\";\r\nimport \"./home.css\";\r\n\r\n//models\r\nimport { VacationModel } from \"../../models/vacation-model\";\r\nimport { FollowModel } from \"../../models/follow-model\";\r\n\r\n//server\r\nimport axiosPrivate from \"../../api/axios\";\r\nimport io from \"socket.io-client\";\r\nimport { Config } from \"../../config\";\r\n\r\n//store\r\nimport { Unsubscribe } from \"redux\";\r\nimport { store } from \"../../redux/store\";\r\nimport { ActionType } from \"../../redux/action-type\";\r\n\r\n//components\r\nimport Card from 'react-bootstrap/Card';\r\nimport ListGroupItem from 'react-bootstrap/ListGroupItem';\r\nimport ListGroup from 'react-bootstrap/ListGroup';\r\nimport { StarFill } from 'react-bootstrap-icons';\r\nimport NavBar from \"../nav-bar/navBar\";\r\nimport { NavLink } from \"react-router-dom\";\r\n\r\n//services\r\nimport { errorHandling, isLoggedIn } from \"../../services/auth\"\r\n\r\n\r\ninterface VacationsState {\r\n    vacations: VacationModel[];\r\n    follows: FollowModel[];\r\n    isLoggedIn: boolean; //for listener event\r\n}\r\n\r\nexport class Home extends Component<any, VacationsState>{\r\n\r\n    private unsubscribeStore: Unsubscribe;\r\n    private socket;\r\n\r\n    public constructor(props: any) {\r\n        super(props);\r\n\r\n        //get vacations and follows from the store\r\n        this.state = {\r\n            vacations: store.getState().vacations,\r\n            follows: store.getState().follows,\r\n            isLoggedIn: store.getState().isLoggedIn\r\n        };\r\n\r\n    }\r\n\r\n\r\n    public async componentDidMount() {\r\n\r\n        if(!isLoggedIn(this.props)) return;\r\n        \r\n        //create connection to the server\r\n        this.socket = io.connect(Config.serverUrl);\r\n\r\n        //if is there any changes in the store get the vacations and the follows from the new store.\r\n        this.unsubscribeStore = store.subscribe(() => {\r\n            const vacations = store.getState().vacations;\r\n            const follows = store.getState().follows;\r\n            const isLoggedIn = store.getState().isLoggedIn;\r\n            this.setState({ vacations, follows, isLoggedIn });\r\n        });\r\n\r\n        //if the store is empty, get the data with ajax\r\n        this.getComponentData();\r\n\r\n    }\r\n\r\n    private getComponentData = async () => {\r\n        \r\n        try {\r\n            if (store.getState().vacations.length === 0) {\r\n                const response = await\r\n                    axiosPrivate.get<VacationModel[]>(\"/api/vacations\");\r\n                const vacations = response.data;\r\n                store.dispatch({ type: ActionType.SaveAllVacations, payload: vacations });\r\n            }\r\n\r\n            if (store.getState().follows.length === 0) {\r\n                const response = await\r\n                    axiosPrivate.get<FollowModel[]>(\"/api/follows\");\r\n                const follows = response.data;\r\n                store.dispatch({ type: ActionType.SaveAllFollows, payload: follows });\r\n                store.dispatch({ type: ActionType.setFollowsPerVacation });\r\n                store.dispatch({ type: ActionType.sortVacations });    \r\n            }\r\n        }\r\n\r\n        catch (err) {\r\n            console.log(\"home err\")\r\n            console.log(err);\r\n            errorHandling(err, this.props);\r\n        }\r\n\r\n    }\r\n\r\n    //add a follow for vacation in the database, and emit\r\n    private addFollow = async (vacationId) => {\r\n        const followToAdd = new FollowModel();\r\n        followToAdd.userName = store.getState().user.userName;\r\n        followToAdd.vacationId = vacationId;\r\n\r\n        try {\r\n            const response = await axiosPrivate.post<FollowModel>(\"/api/follows\", followToAdd);\r\n            if (response.data) {\r\n                const followAdded = response.data;\r\n                this.socket.emit(\"user-added-a-follow-from-client\", followAdded);\r\n            }\r\n        }\r\n\r\n        catch (err) {\r\n            errorHandling(err, this.props);\r\n        }\r\n    }\r\n\r\n    //remove a follow for vacation in the database, and emit\r\n    private removeFollow = async (vacationId) => {\r\n\r\n        const userName = store.getState().user.userName;\r\n\r\n        const followToRemove = this.state.follows.find(f => {\r\n            return f.userName === userName && f.vacationId === vacationId\r\n        });\r\n\r\n        try {\r\n            await axiosPrivate.delete(`/api/follows/${followToRemove.followId}`);\r\n            this.socket.emit(\"user-removed-a-follow-from-client\", followToRemove.followId);\r\n        }\r\n\r\n        catch (err) {\r\n            errorHandling(err, this.props);\r\n        }\r\n    }\r\n\r\n    //disconnect from the server and the store\r\n    public componentWillUnmount(): void {\r\n        this.unsubscribeStore?.();\r\n        this.socket?.disconnect();\r\n    }\r\n\r\n\r\n    public render() {\r\n\r\n        return (\r\n            <div className=\"home\">\r\n                <NavBar />\r\n                <div className=\"card-container\">\r\n                    {this.state.vacations.map(v =>\r\n\r\n\r\n                        <Card key={v.vacationId}>\r\n                            <Card.Img variant=\"top\" className=\"img\" src={Config.serverUrl + \"/assets/images/vacations/\" + v.img} />\r\n                            <Card.Body>\r\n                                {v.isFollow ? <StarFill className=\"star-fill\" color=\"yellow\" size={\"1.5rem\"} onClick={() => this.removeFollow(v.vacationId)} /> : <StarFill className=\"star-fill\" color=\"grey\" size={\"1.5rem\"} onClick={() => this.addFollow(v.vacationId)} />}\r\n\r\n                                <Card.Title>{v.destination}</Card.Title>\r\n                                <Card.Text>\r\n                                    {v.description}\r\n                                </Card.Text>\r\n                            </Card.Body>\r\n                            <ListGroup className=\"list-group-flush\">\r\n                                <ListGroupItem>Follows: {v.follows}</ListGroupItem>\r\n                                <ListGroupItem>Start: {new Date(v.startingDate).toDateString()}</ListGroupItem>\r\n                                <ListGroupItem>end: {new Date(v.endingDate).toDateString()}</ListGroupItem>\r\n                                <ListGroupItem>Cost: {v.price}$</ListGroupItem>\r\n                                <ListGroupItem><NavLink className=\"purchase\" to={\"/purchase/\" + v.vacationId} exact> purchase </NavLink></ListGroupItem>\r\n                            </ListGroup>\r\n                        </Card>\r\n                    )}\r\n                </div>\r\n\r\n            </div>\r\n        );\r\n    }\r\n}","\r\nexport class UserModel {\r\n\r\n    public constructor( // Compiler Magic\r\n        public firstName?: string,\r\n        public lastName?: string,\r\n        public userName?: string,\r\n        public password?: string,\r\n        public isAdmin?: boolean,\r\n        ) {\r\n    }\r\n}\r\n","export function validateAvailableUserName(userName,usersNames){\r\n    let error=\"\";\r\n    usersNames.forEach(user=>{\r\n        if(userName===user.userName){\r\n            error=\"user name is not available\";\r\n        }\r\n    });\r\n    return error;\r\n}\r\n\r\nexport function validateUserName(userName){\r\n\r\n    if (userName === \"\") {\r\n        return \"Missing user name\";\r\n    }\r\n\r\n    else if(userName.length < 2){\r\n        return \"User name too short\";\r\n    }\r\n\r\n    else if (userName.length > 15) {\r\n        return \"User name too long\";\r\n    }\r\n    return \"\";\r\n}\r\n\r\n\r\nexport function validateFirstName(firstName){\r\n    if (firstName === \"\") {\r\n        return \"Missing first name\";\r\n    }\r\n\r\n    else if(firstName.length < 2){\r\n        return  \"first name is too short\";\r\n    }\r\n    \r\n    else if (firstName.length > 10) {\r\n        return  \"first name is too long\";\r\n    }\r\n\r\n    else if(!('A'<=firstName[0] && firstName[0] <='Z')){\r\n        return  \"first name must start with a capital letter\";\r\n    }\r\n\r\n    return \"\";\r\n}\r\n\r\n\r\nexport function validateLastName(lastName){\r\n    if (lastName === \"\") {\r\n        return  \"Missing last name\";\r\n    }\r\n\r\n    else if(lastName.length < 2){\r\n        return  \"last name is too short\";\r\n    }\r\n    \r\n    else if (lastName.length > 10) {\r\n        return  \"last name is too long\";\r\n    }\r\n\r\n    else if(!('A'<=lastName[0] && lastName[0] <='Z')){\r\n        return  \"first name must start with a capital letter\";\r\n    }\r\n\r\n    return \"\";\r\n}\r\n\r\n\r\n\r\nexport function validatePassword(password){\r\n    if (password === \"\") {\r\n        return \"Missing password\";\r\n    }\r\n\r\n    else if(password.length < 6){\r\n        return \"password is too short\";\r\n    }\r\n    \r\n    else if (password.length > 10) {\r\n        return \"password is too long\";\r\n    }\r\n    return \"\";\r\n}\r\n\r\nexport function verifyPassword(verifyPassword,password){\r\n    if(verifyPassword===\"\"){\r\n        return \"Missing verified password\";\r\n    }\r\n    else if (verifyPassword !== password) {\r\n        return \"verify password\";\r\n    }\r\n    return \"\";\r\n}","import React, { Component, ChangeEvent } from \"react\";\r\nimport \"./registration.css\";\r\n\r\n//server\r\nimport axios from \"../../api/axios\";\r\n\r\n//models\r\nimport { UserModel } from \"../../models/user-model\";\r\n\r\n//components\r\nimport { NavLink } from \"react-router-dom\";\r\nimport Button from 'react-bootstrap/Button';\r\n\r\n//validation\r\nimport {\r\n    validateAvailableUserName,\r\n    validateUserName,\r\n    validateFirstName,\r\n    validateLastName,\r\n    validatePassword,\r\n    verifyPassword\r\n}\r\n    from \"../../services/user-validation\";\r\n\r\n//store\r\nimport { store } from \"../../redux/store\";\r\nimport { ActionType } from \"../../redux/action-type\";\r\n\r\n//services\r\nimport { errorHandling } from \"../../services/auth\"\r\nimport Cookies from 'universal-cookie';\r\n\r\n\r\n\r\n\r\ninterface UserState {\r\n    user: UserModel;\r\n    usersNames: UserModel[];\r\n    errors: {\r\n        userNameError: string,\r\n        firstNameError: string,\r\n        lastNameError: string,\r\n        passwordError: string,\r\n        verifyPasswordError: string\r\n    };\r\n\r\n}\r\n\r\nexport class Registration extends Component<any, UserState>{\r\n\r\n    public constructor(props: any) {\r\n        super(props);\r\n        this.state = {\r\n            user: new UserModel(),\r\n            usersNames: [],\r\n            errors: { userNameError: \"*\", firstNameError: \"*\", lastNameError: \"*\", passwordError: \"*\", verifyPasswordError: \"*\" }\r\n        };\r\n    }\r\n\r\n    public componentDidMount() {\r\n        \r\n        //if the user is logged in, navigate to home page\r\n        if (store.getState().user) {\r\n            this.props.history.push(\"/\");\r\n            return;\r\n        }\r\n\r\n        this.getAllUsersNames();\r\n    }\r\n\r\n    private async getAllUsersNames() {\r\n        try {\r\n            const response = await axios.get<UserModel[]>(\"/api/auth/usersNames\");\r\n            const usersNames = response.data;\r\n\r\n            this.setState({ usersNames });\r\n        }\r\n\r\n        catch (err) {\r\n            errorHandling(err, this.props);\r\n        }\r\n    }\r\n\r\n    private setUserName = (args: ChangeEvent<HTMLInputElement>) => {\r\n        const userName = args.target.value;\r\n\r\n        let nameError;\r\n\r\n        nameError = validateAvailableUserName(userName, this.state.usersNames);\r\n        if (nameError !== \"user name is not available\") {\r\n            nameError = validateUserName(userName);\r\n        }\r\n\r\n        const errors = { ...this.state.errors };\r\n        errors.userNameError = nameError;\r\n        this.setState({ errors });\r\n\r\n        const user = { ...this.state.user };\r\n        user.userName = userName;\r\n        this.setState({ user });\r\n    }\r\n\r\n    private setFirstName = (args: ChangeEvent<HTMLInputElement>) => {\r\n        const firstName = args.target.value;\r\n\r\n        let nameError = validateFirstName(firstName);\r\n\r\n        const errors = { ...this.state.errors };\r\n        errors.firstNameError = nameError;\r\n        this.setState({ errors });\r\n\r\n        const user = { ...this.state.user };\r\n        user.firstName = firstName;\r\n        this.setState({ user });\r\n\r\n    }\r\n\r\n    private setLastName = (args: ChangeEvent<HTMLInputElement>) => {\r\n        const lastName = args.target.value;\r\n\r\n        let nameError = validateLastName(lastName);\r\n\r\n        const errors = { ...this.state.errors };\r\n        errors.lastNameError = nameError;\r\n        this.setState({ errors });\r\n\r\n        const user = { ...this.state.user };\r\n        user.lastName = lastName;\r\n        this.setState({ user });\r\n\r\n    }\r\n\r\n    private setPassword = (args: ChangeEvent<HTMLInputElement>) => {\r\n        const password = args.target.value;\r\n\r\n        let nameError = validatePassword(password);\r\n\r\n        const errors = { ...this.state.errors };\r\n        errors.passwordError = nameError;\r\n        this.setState({ errors });\r\n\r\n        const user = { ...this.state.user };\r\n        user.password = password;\r\n        this.setState({ user });\r\n\r\n    }\r\n\r\n    private verifyPasswordUser = (args: ChangeEvent<HTMLInputElement>) => {\r\n        const verifiedPassword = args.target.value;\r\n        const user = { ...this.state.user };\r\n\r\n        let nameError = verifyPassword(verifiedPassword, user.password);\r\n\r\n        const errors = { ...this.state.errors };\r\n        errors.verifyPasswordError = nameError;\r\n        this.setState({ errors });\r\n    }\r\n\r\n    private isFormLegal = () => {\r\n        for (const prop in this.state.errors) {\r\n            if (this.state.errors[prop].toString() !== \"\") {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n\r\n    private register = async () => {\r\n        try {\r\n            const response = await axios.post(\"/api/auth/register\",\r\n                this.state.user);\r\n\r\n            store.dispatch({ type: ActionType.saveUser, payload: response.data.user });\r\n            store.dispatch({ type: ActionType.saveToken, payload: response.data.accessToken });\r\n\r\n            const cookies = new Cookies();\r\n            cookies.set('user', response.data.user, { path: '/' , maxAge: 24 * 60 * 60});\r\n\r\n            this.props.history.push(\"/\");\r\n        }\r\n\r\n        catch (err) {\r\n            errorHandling(err, this.props);\r\n        }\r\n\r\n    }\r\n\r\n    \r\n    public render() {\r\n        return (\r\n            <div className=\"registration\">\r\n                <div className=\"card-registration\">\r\n                    <h1>Sign up</h1>\r\n                    <form action=\"\">\r\n                        <div className=\"input-box\">\r\n                            <input type=\"text\" name=\"\" id=\"userBox\" placeholder=\"User Name\" onChange={this.setUserName} />\r\n                            <span className=\"error\">{this.state.errors.userNameError === \"*\" ? \"\" : this.state.errors.userNameError}</span>\r\n                        </div>\r\n                        <div className=\"input-box\">\r\n                            <input type=\"text\" name=\"\" id=\"userBox\" placeholder=\"First Name\" onChange={this.setFirstName} />\r\n                            <span className=\"error\">{this.state.errors.firstNameError === \"*\" ? \"\" : this.state.errors.firstNameError}</span>\r\n                        </div>\r\n                        <div className=\"input-box\">\r\n                            <input type=\"text\" name=\"\" id=\"userBox\" placeholder=\"Last Name\" onChange={this.setLastName} />\r\n                            <span className=\"error\">{this.state.errors.lastNameError === \"*\" ? \"\" : this.state.errors.lastNameError}</span>\r\n                        </div>\r\n                        <div className=\"input-box\">\r\n                            <input type=\"password\" name=\"\" id=\"userBox\" placeholder=\"Password\" onChange={this.setPassword} />\r\n                            <span className=\"error\">{this.state.errors.passwordError === \"*\" ? \"\" : this.state.errors.passwordError}</span>\r\n                        </div>\r\n                        <div className=\"input-box\">\r\n                            <input type=\"password\" name=\"\" id=\"userBox\" placeholder=\"Verify Password\" onChange={this.verifyPasswordUser} />\r\n                            <span className=\"error\">{this.state.errors.verifyPasswordError === \"*\" ? \"\" : this.state.errors.verifyPasswordError}</span>\r\n                        </div>\r\n                        <Button variant=\"primary\" type=\"submit\" disabled={!this.isFormLegal()} onClick={this.register}>Sign up</Button>\r\n\r\n                    </form>\r\n                    <NavLink className=\"navigate\" to=\"/login\" exact>Do you have an account? <br /> Sign in now</NavLink>\r\n\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}","import React, { Component, ChangeEvent } from \"react\";\r\nimport \"./login.css\";\r\n\r\n//server\r\nimport axios from \"../../api/axios\";\r\n\r\n//models\r\nimport { UserModel } from \"../../models/user-model\";\r\n\r\n//validation\r\nimport { validateUserName, validatePassword } from \"../../services/user-validation\";\r\n\r\n//components\r\nimport Button from 'react-bootstrap/Button';\r\nimport { NavLink } from \"react-router-dom\";\r\n\r\n//services\r\nimport Cookies from 'universal-cookie';\r\nimport { errorHandling } from \"../../services/auth\"\r\n\r\n//store\r\nimport { store } from \"../../redux/store\";\r\nimport { ActionType } from \"../../redux/action-type\";\r\n\r\n\r\ninterface UserState {\r\n    user: UserModel;\r\n    errors: {\r\n        userNameError: string,\r\n        passwordError: string,\r\n    };\r\n}\r\n\r\nexport class Login extends Component<any, UserState>{\r\n\r\n    public constructor(props: any) {\r\n        super(props);\r\n        this.state = {\r\n            user: new UserModel(),\r\n            errors: { userNameError: \"*\", passwordError: \"*\" }\r\n\r\n        };\r\n    }\r\n\r\n    public componentDidMount() {\r\n        console.log(\"login componentDidMount\");\r\n\r\n        //if the user is logged in, navigate to Home page\r\n        if (store.getState().user) {\r\n            this.props.history.push(\"/\");\r\n            return;\r\n        }\r\n    }\r\n\r\n    private setUserName = (args: ChangeEvent<HTMLInputElement>) => {\r\n        const userName = args.target.value;\r\n\r\n        let nameError = validateUserName(userName);\r\n\r\n        const errors = { ...this.state.errors };\r\n        errors.userNameError = nameError;\r\n        this.setState({ errors });\r\n\r\n        const user = { ...this.state.user };\r\n        user.userName = userName;\r\n        this.setState({ user });\r\n\r\n    }\r\n\r\n    private setPassword = (args: ChangeEvent<HTMLInputElement>) => {\r\n        const password = args.target.value;\r\n\r\n        let nameError = validatePassword(password);\r\n\r\n        const errors = { ...this.state.errors };\r\n        errors.passwordError = nameError;\r\n        this.setState({ errors });\r\n\r\n        const user = { ...this.state.user };\r\n        user.password = password;\r\n        this.setState({ user });\r\n    }\r\n\r\n    //check if the form is legal\r\n    private isFormLegal = () => {\r\n        for (const prop in this.state.errors) {\r\n            if (this.state.errors[prop].toString() !== \"\") {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n\r\n\r\n    private login = async (e) => {\r\n\r\n        try {\r\n            e.preventDefault();\r\n            const response = await axios.post(\"/api/auth/login\",\r\n                this.state.user, { withCredentials: true });\r\n\r\n            store.dispatch({ type: ActionType.saveUser, payload: response.data.user });\r\n            store.dispatch({ type: ActionType.saveToken, payload: response.data.accessToken });\r\n\r\n            const cookies = new Cookies();\r\n            cookies.set('user', response.data.user, { path: '/', maxAge: 24 * 60 * 60 });\r\n\r\n            this.props.history.push(\"/\");\r\n        }\r\n\r\n        catch (err) {\r\n            errorHandling(err, this.props);\r\n        }\r\n    }\r\n\r\n\r\n    public render() {\r\n        return (\r\n            <div className=\"login\">\r\n                <div className=\"card-login\">\r\n                    <form className=\"form-login\" onSubmit={this.login}>\r\n                        <h1>Login</h1>\r\n                        <input type=\"text\" name=\"\" id=\"userBox\" placeholder=\"User Name\" onChange={this.setUserName} />\r\n                        <input type=\"password\" name=\"\" id=\"userBox\" placeholder=\"Password\" onChange={this.setPassword} />\r\n                        <br />\r\n                        <Button variant=\"primary\" type=\"submit\" disabled={!this.isFormLegal()} >\r\n                            Login\r\n                        </Button >\r\n                    </form>\r\n                    <NavLink className=\"navigate\" to=\"/registration\" exact>Not a member? Sign up now</NavLink>\r\n\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}","import React, { Component } from \"react\";\r\nimport \"./admin.css\";\r\n\r\n//models\r\nimport { VacationModel } from \"../../models/vacation-model\";\r\n\r\n//server\r\nimport axiosPrivate from \"../../api/axios\";\r\nimport io from \"socket.io-client\";\r\nimport { Config } from \"../../config\";\r\n\r\n//store\r\nimport { Unsubscribe } from \"redux\";\r\nimport { store } from \"../../redux/store\";\r\nimport { ActionType } from \"../../redux/action-type\";\r\n\r\n//components\r\nimport { NavLink } from \"react-router-dom\";\r\nimport Card from 'react-bootstrap/Card';\r\nimport ListGroupItem from 'react-bootstrap/ListGroupItem';\r\nimport ListGroup from 'react-bootstrap/ListGroup';\r\nimport { X } from 'react-bootstrap-icons';\r\nimport { Pencil } from 'react-bootstrap-icons';\r\nimport NavBar from \"../nav-bar/navBar\";\r\n\r\n//services\r\nimport { errorHandling, isLoggedIn, isAdmin } from \"../../services/auth\"\r\n\r\n\r\n\r\ninterface VacationsState {\r\n    vacations: VacationModel[];\r\n    isLoggedIn: boolean;\r\n}\r\n\r\nexport class Admin extends Component<any, VacationsState>{\r\n\r\n    private unsubscribeStore: Unsubscribe;\r\n    private socket;\r\n\r\n    public constructor(props: any) {\r\n        super(props);\r\n\r\n        //get vacations from the store\r\n        this.state = {\r\n            vacations: store.getState().vacations,\r\n            isLoggedIn: store.getState().isLoggedIn\r\n        };\r\n    }\r\n\r\n\r\n    public async componentDidMount() {\r\n\r\n        if(!isLoggedIn(this.props)) return;\r\n        if(!isAdmin(this.props)) return;\r\n\r\n        //create connection to the server\r\n        this.socket = io.connect(Config.serverUrl);\r\n\r\n        //if is there any changes in the store get the vacations from the new store.\r\n        this.unsubscribeStore = store.subscribe(() => {\r\n            const vacations = store.getState().vacations;\r\n            this.setState({ vacations });\r\n        });\r\n\r\n\r\n        // if the store is not empty, cancel the function and don't use axios\r\n        if (this.state.vacations.length > 0) {\r\n            return;\r\n        }\r\n\r\n        //if the store is empty, get the data with ajax\r\n        this.getDataWithAjax();\r\n\r\n    }\r\n\r\n    //function for getting the vacations with ajax and save in the store\r\n    private getDataWithAjax = async () => {\r\n        try {\r\n            const response = await\r\n                axiosPrivate.get<VacationModel[]>(\"/api/vacations\");\r\n            const vacations = response.data;\r\n            store.dispatch({ type: ActionType.SaveAllVacations, payload: vacations });\r\n        }\r\n\r\n        catch (err) {\r\n            errorHandling(err, this.props);\r\n        }\r\n    }\r\n\r\n\r\n    //delete a vacation from the database and the store, and emit\r\n    private async delete(vacationId) {\r\n        try {\r\n            await axiosPrivate.delete(`/api/vacations/${vacationId}`);\r\n            this.socket.emit(\"Admin-removed-a-vacation-from-client\", vacationId);\r\n        }\r\n\r\n        catch (err) {\r\n            errorHandling(err, this.props);\r\n        }\r\n    }\r\n\r\n\r\n    //disconnect from the server and the store\r\n    public componentWillUnmount(): void {\r\n        this.unsubscribeStore?.();\r\n        this.socket?.disconnect();\r\n    }\r\n\r\n    public render() {\r\n        return (\r\n            <div className=\"home\">\r\n                <NavBar />\r\n                <div className=\"card-container\">\r\n                    {this.state.vacations.map(v =>\r\n\r\n                        <Card key={v.vacationId}>\r\n                            <Card.Img variant=\"top\" className=\"img\" src={Config.serverUrl + \"/assets/images/vacations/\" + v.img} />\r\n                            <Card.Body>\r\n                                <X className=\"delete\" color=\"black\" size={\"1.5rem\"} onClick={() => this.delete(v.vacationId)} />\r\n                                <NavLink to={\"/admin/\" + v.vacationId}>\r\n                                    <Pencil color=\"black\" size={\"1.5rem\"} />\r\n                                </NavLink>\r\n                                <Card.Title>{v.destination}</Card.Title>\r\n                                <Card.Text>\r\n                                    {v.description}\r\n                                </Card.Text>\r\n\r\n                            </Card.Body>\r\n                            <ListGroup className=\"list-group-flush\">\r\n                                <ListGroupItem>Start: {new Date(v.startingDate).toDateString()}</ListGroupItem>\r\n                                <ListGroupItem>end: {new Date(v.endingDate).toDateString()}</ListGroupItem>\r\n                                <ListGroupItem>Cost: {v.price}$</ListGroupItem>\r\n                            </ListGroup>\r\n                        </Card>\r\n                    )}\r\n                </div>\r\n                <br />\r\n\r\n            </div>\r\n        );\r\n    }\r\n}","export function JsonToString(date){\r\n    const d=new Date(date);\r\n    d.setDate(d.getDate()+1);\r\n    const stringDate=d.toISOString();\r\n    const arr=stringDate.split(\"T\");\r\n   return arr[0];\r\n   \r\n}\r\n\r\nexport function StringToJson(date){\r\n    const d=new Date(date);\r\n    d.setDate(d.getDate()-1);\r\n    d.setHours(24);\r\n    const stringDate=d.toJSON();\r\n    return stringDate;\r\n}","\r\nexport function validateDescription(description){\r\n\r\n    if (description === \"\") {\r\n        return \"Missing description\";\r\n    }\r\n\r\n    else if(description.length < 3){\r\n        return \"Description is too short\";\r\n    }\r\n\r\n    else if (description.length > 200) {\r\n        return \"Description is too long\";\r\n    }\r\n    return \"\";\r\n}\r\n\r\n\r\nexport function validateDestination(destination){\r\n    if (destination === \"\") {\r\n        return \"Missing destination\";\r\n    }\r\n\r\n    else if(destination.length < 2){\r\n        return  \"Destination is too short\";\r\n    }\r\n    \r\n    else if (destination.length > 30) {\r\n        return  \"Destination is too long\";\r\n    }\r\n\r\n    else if(!('A'<=destination[0] && destination[0] <='Z')){\r\n        return  \"Destination must start with a capital letter\";\r\n    }\r\n    return \"\";\r\n}\r\n\r\n\r\nexport function validateImgUrl(img){\r\n    return \"\";\r\n}\r\n\r\nexport function validateStartingDate(date){\r\n    return \"\";\r\n}\r\n\r\nexport function validateEndingDate(date){\r\n    return \"\";\r\n\r\n}\r\n\r\n\r\n\r\nexport function validatePrice(price){\r\n\r\n    if (!price) {\r\n        return \"Missing price\";\r\n    }\r\n\r\n    else if(price < 0){\r\n        return \"Price can't be negative\";\r\n    }\r\n    \r\n    else if (price > 50000) {\r\n        return \"Price is too high\";\r\n    }\r\n    return \"\";\r\n}\r\n\r\n","import React, { Component, ChangeEvent } from \"react\";\r\nimport \"./editVacation.css\";\r\n\r\n//models\r\nimport { VacationModel } from \"../../models/vacation-model\";\r\n\r\n//store\r\nimport { Unsubscribe } from \"redux\";\r\nimport { store } from \"../../redux/store\";\r\n\r\n//services\r\nimport { JsonToString } from \"../../services/date\";\r\nimport { StringToJson } from \"../../services/date\";\r\nimport { errorHandling, isLoggedIn, isAdmin } from \"../../services/auth\"\r\n\r\n//validations\r\nimport { validateDescription, validateDestination, validateImgUrl, validateStartingDate, validateEndingDate, validatePrice } from \"../../services/vacation-validation\";\r\n\r\n//components\r\nimport Button from 'react-bootstrap/Button';\r\nimport Form from 'react-bootstrap/Form';\r\nimport NavBar from \"../nav-bar/navBar\";\r\n\r\n//server\r\nimport io from \"socket.io-client\";\r\nimport { Config } from \"../../config\";\r\nimport axiosPrivate from \"../../api/axios\";\r\n\r\n\r\n\r\ninterface VacationState {\r\n    vacations: VacationModel[];\r\n    vacation: VacationModel;\r\n    isLoggedIn: boolean; //for listener event\r\n    file: any;\r\n    errors: {\r\n        descriptionError: string,\r\n        destinationError: string,\r\n        imgError: string,\r\n        startingDateError: string,\r\n        endingDateError: string,\r\n        priceError: string\r\n    };\r\n}\r\n\r\nexport class EditVacation extends Component<any, VacationState>{\r\n\r\n    private unsubscribeStore: Unsubscribe;\r\n    private socket;\r\n\r\n    public constructor(props: any) {\r\n        super(props);\r\n\r\n        //get vacations and login status from the store\r\n        this.state = {\r\n            vacations: store.getState().vacations,\r\n            vacation: {},\r\n            isLoggedIn: store.getState().isLoggedIn,\r\n            file: null,\r\n            errors: { descriptionError: \"\", destinationError: \"\", imgError: \"\", startingDateError: \"\", endingDateError: \"\", priceError: \"\" }\r\n        };\r\n\r\n    }\r\n\r\n\r\n    public async componentDidMount() {\r\n\r\n        if(!isLoggedIn(this.props)) return;\r\n        if(!isAdmin(this.props)) return;\r\n\r\n        //create connection to the server\r\n        this.socket = io.connect(Config.serverUrl);\r\n\r\n        //if is there any changes in the store get the vacations from the new store.\r\n        this.unsubscribeStore = store.subscribe(() => {\r\n            const vacations = store.getState().vacations;\r\n            const isLoggedIn = store.getState().isLoggedIn;\r\n            this.setState({ vacations, isLoggedIn });\r\n        });\r\n\r\n        let vacation;\r\n\r\n        //if the store is not empty, find the vacation for edit and don't use axios at all\r\n        if (this.state.vacations.length > 0) {\r\n            for (let v of this.state.vacations) {\r\n                if (v.vacationId === +this.props.match.params.id) {\r\n                    vacation = ({ ...v });\r\n                }\r\n            }\r\n        }\r\n\r\n        // if the store is empty, get the vacation for edit with axios\r\n        else {\r\n            try {\r\n                const response = await\r\n                    axiosPrivate.get<VacationModel>(`/api/vacations/${+this.props.match.params.id}`);\r\n                vacation = response.data;\r\n            }\r\n\r\n            catch (err) {\r\n                errorHandling(err, this.props);\r\n            }\r\n        }\r\n\r\n        //treatment with json date format\r\n        vacation.startingDate = JsonToString(vacation.startingDate);\r\n        vacation.endingDate = JsonToString(vacation.endingDate);\r\n        this.setState({ vacation });\r\n    }\r\n\r\n\r\n    //get the data from inputs to the state\r\n    public setDescription = (args: ChangeEvent<HTMLInputElement>) => {\r\n        const description = args.target.value;\r\n        let nameError;\r\n\r\n        nameError = validateDescription(description);\r\n\r\n        const errors = { ...this.state.errors };\r\n        errors.descriptionError = nameError;\r\n        this.setState({ errors });\r\n\r\n        const vacation = { ...this.state.vacation };\r\n        vacation.description = description;\r\n        this.setState({ vacation });\r\n    }\r\n\r\n    public setDestination = (args: ChangeEvent<HTMLInputElement>) => {\r\n        const destination = args.target.value;\r\n        let nameError;\r\n\r\n        nameError = validateDestination(destination);\r\n\r\n        const errors = { ...this.state.errors };\r\n        errors.destinationError = nameError;\r\n        this.setState({ errors });\r\n\r\n        const vacation = { ...this.state.vacation };\r\n        vacation.destination = destination;\r\n        this.setState({ vacation });\r\n    }\r\n\r\n    private onFileChange = (args: ChangeEvent<HTMLInputElement>) => {\r\n        const file = args.target.files[0];\r\n        this.setImgUrl(file.name);\r\n        this.setState({ file });\r\n    }\r\n\r\n    private setImgUrl = (fileName: string) => {\r\n        const img = fileName;\r\n        let nameError;\r\n\r\n        nameError = validateImgUrl(img);\r\n\r\n        const errors = { ...this.state.errors };\r\n        errors.imgError = nameError;\r\n        this.setState({ errors });\r\n\r\n        const vacation = { ...this.state.vacation };\r\n        vacation.img = img;\r\n        this.setState({ vacation });\r\n    }\r\n\r\n    public setStartingDate = (args: ChangeEvent<HTMLInputElement>) => {\r\n        const startingDate = args.target.value;\r\n        let nameError;\r\n\r\n        nameError = validateStartingDate(startingDate);\r\n\r\n        const errors = { ...this.state.errors };\r\n        errors.startingDateError = nameError;\r\n        this.setState({ errors });\r\n\r\n        const vacation = { ...this.state.vacation };\r\n        vacation.startingDate = startingDate;\r\n        this.setState({ vacation });\r\n    }\r\n\r\n    public setEndingDate = (args: ChangeEvent<HTMLInputElement>) => {\r\n        const endingDate = args.target.value;\r\n        let nameError;\r\n\r\n        nameError = validateEndingDate(endingDate);\r\n\r\n        const errors = { ...this.state.errors };\r\n        errors.endingDateError = nameError;\r\n        this.setState({ errors });\r\n\r\n        const vacation = { ...this.state.vacation };\r\n        vacation.endingDate = endingDate;\r\n        this.setState({ vacation });\r\n    }\r\n\r\n    private setPrice = (args: ChangeEvent<HTMLInputElement>) => {\r\n        const price = +args.target.value;\r\n        let nameError;\r\n\r\n        nameError = validatePrice(price);\r\n\r\n        const errors = { ...this.state.errors };\r\n        errors.priceError = nameError;\r\n        this.setState({ errors });\r\n\r\n        const vacation = { ...this.state.vacation };\r\n        vacation.price = price;\r\n        this.setState({ vacation });\r\n    }\r\n\r\n    private isFormLegal() {\r\n        for (const prop in this.state.errors) {\r\n            if (this.state.errors[prop].toString() !== \"\") {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n\r\n\r\n    public update = async () => {\r\n        try {\r\n            \r\n            if (this.state.file){\r\n                const formData = new FormData();\r\n                formData.append(\r\n                    \"file\",\r\n                    this.state.file\r\n                );\r\n                await axiosPrivate.post(\"/upload-image\", formData);\r\n            }\r\n\r\n            const vacationToUpdate = { ...this.state.vacation }\r\n            await axiosPrivate.put(`/api/vacations/${+this.props.match.params.id}`,\r\n                vacationToUpdate);\r\n\r\n            vacationToUpdate.startingDate = StringToJson(vacationToUpdate.startingDate);\r\n            vacationToUpdate.endingDate = StringToJson(vacationToUpdate.endingDate);\r\n            this.socket.emit(\"Admin-updated-a-vacation-from-client\", vacationToUpdate);\r\n            this.props.history.push(\"/admin\");\r\n        }\r\n\r\n        catch (err) {\r\n            errorHandling(err, this.props);\r\n        }\r\n    }\r\n\r\n    //disconnect from the server and the store\r\n    public componentWillUnmount(): void {\r\n        this.unsubscribeStore?.();\r\n        this.socket?.disconnect();\r\n    }\r\n\r\n    public render() {\r\n        return (\r\n            <div className=\"EditVacation\">\r\n                <NavBar />\r\n                <div className=\"form-container\">\r\n                    <h1>Edit Vacation</h1>\r\n                    <br />\r\n                    <Form.Group controlId=\"formTextDestination\">\r\n                        <Form.Label>Destination</Form.Label>\r\n                        <Form.Control type=\"text\" placeholder=\"Enter description\" value={this.state.vacation.destination || \"\"} onChange={this.setDestination} />\r\n                        <Form.Text className=\"text-muted\">\r\n                            {this.state.errors.destinationError}\r\n                        </Form.Text>\r\n                    </Form.Group>\r\n\r\n                    <Form.Group controlId=\"formTextDescription\">\r\n                        <Form.Label>Description</Form.Label>\r\n                        <Form.Control type=\"text\" placeholder=\"Enter description\" value={this.state.vacation.description || \"\"} onChange={this.setDescription} />\r\n                        <Form.Text className=\"text-muted\" >\r\n                            {this.state.errors.descriptionError}\r\n                        </Form.Text>\r\n                    </Form.Group>\r\n\r\n                    <Form.Group controlId=\"formFileImage\">\r\n                        <Form.Label>Upload image</Form.Label>\r\n                        <Form.Control type=\"file\" name=\"file\" onChange={this.onFileChange} />\r\n                    </Form.Group>\r\n\r\n                    <Form.Group controlId=\"formStartDate\">\r\n                        <Form.Label>Start Date</Form.Label>\r\n                        <Form.Control type=\"date\" placeholder=\"Enter description\" value={this.state.vacation.startingDate || \"\"} onChange={this.setStartingDate} />\r\n                        <Form.Text className=\"text-muted\">\r\n                            {this.state.errors.startingDateError}\r\n                        </Form.Text>\r\n                    </Form.Group>\r\n\r\n                    <Form.Group controlId=\"formEndingDate\">\r\n                        <Form.Label>Ending Date</Form.Label>\r\n                        <Form.Control type=\"date\" placeholder=\"Enter description\" value={this.state.vacation.endingDate || \"\"} onChange={this.setEndingDate} />\r\n                        <Form.Text className=\"text-muted\">\r\n                            {this.state.errors.endingDateError}\r\n                        </Form.Text>\r\n                    </Form.Group>\r\n\r\n                    <Form.Group controlId=\"formTextPrice\">\r\n                        <Form.Label>Price</Form.Label>\r\n                        <Form.Control type=\"text\" placeholder=\"Enter description\" value={this.state.vacation.price || \"\"} onChange={this.setPrice} />\r\n                        <Form.Text className=\"text-muted\">\r\n                            {this.state.errors.priceError}\r\n                        </Form.Text>\r\n                    </Form.Group>\r\n\r\n                    <Button variant=\"primary\" type=\"submit\" disabled={!this.isFormLegal()} onClick={this.update}>\r\n                        Submit\r\n                    </Button >\r\n                </div>\r\n\r\n            </div>\r\n        );\r\n    }\r\n}","export class VacationModel {\r\n\r\n    public constructor( // Compiler Magic\r\n        public vacationId?: number,\r\n        public description?: string,\r\n        public destination?: string,\r\n        public img?: string,\r\n        public startingDate?: string,\r\n        public endingDate?: string,\r\n        public price?: number,\r\n        public follows?: number,\r\n        public isFollow?: boolean) {\r\n    }\r\n}\r\n\r\n","import React, { Component, ChangeEvent } from \"react\";\r\nimport \"./addVacation.css\";\r\n\r\n//server\r\nimport axiosPrivate from \"../../api/axios\";\r\nimport io from \"socket.io-client\";\r\nimport { Config } from \"../../config\";\r\n\r\n//models\r\nimport { VacationModel } from \"../../models/vacation-model\";\r\n\r\n//store\r\nimport { store } from \"../../redux/store\";\r\n\r\n//validation\r\nimport {\r\n    validateDescription,\r\n    validateDestination,\r\n    validateImgUrl,\r\n    validateStartingDate,\r\n    validateEndingDate,\r\n    validatePrice\r\n} from \"../../services/vacation-validation\";\r\n\r\n//components\r\nimport NavBar from \"../nav-bar/navBar\";\r\nimport Button from 'react-bootstrap/Button';\r\nimport Form from 'react-bootstrap/Form';\r\n\r\n//services\r\nimport { StringToJson } from \"../../services/date\";\r\nimport { errorHandling, isLoggedIn, isAdmin, } from \"../../services/auth\"\r\n\r\n\r\ninterface VacationState {\r\n    vacation: VacationModel;\r\n    isLoggedIn: boolean;\r\n    file: any;\r\n    errors: {\r\n        descriptionError: string,\r\n        destinationError: string,\r\n        imgError: string,\r\n        startingDateError: string,\r\n        endingDateError: string,\r\n        priceError: string\r\n    };\r\n\r\n}\r\n\r\nexport class AddVacation extends Component<any, VacationState>{\r\n\r\n    private socket;\r\n\r\n    public constructor(props: any) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            vacation: new VacationModel(),\r\n            isLoggedIn: store.getState().isLoggedIn,\r\n            file: null,\r\n            errors: { descriptionError: \"*\", destinationError: \"*\", imgError: \"*\", startingDateError: \"*\", endingDateError: \"*\", priceError: \"*\" }\r\n\r\n        };\r\n    }\r\n\r\n\r\n    public async componentDidMount() {\r\n        if(!isLoggedIn(this.props)) return;\r\n        if(!isAdmin(this.props)) return;\r\n\r\n        //create connection to the server\r\n        this.socket = io.connect(Config.serverUrl);\r\n    }\r\n\r\n\r\n    //get the data from inputs to the state\r\n    private setDescription = (args: ChangeEvent<HTMLInputElement>) => {\r\n        const description = args.target.value;\r\n        let nameError;\r\n\r\n        nameError = validateDescription(description);\r\n\r\n        const errors = { ...this.state.errors };\r\n        errors.descriptionError = nameError;\r\n        this.setState({ errors });\r\n\r\n        const vacation = { ...this.state.vacation };\r\n        vacation.description = description;\r\n        this.setState({ vacation });\r\n\r\n    }\r\n\r\n    private setDestination = (args: ChangeEvent<HTMLInputElement>) => {\r\n        const destination = args.target.value;\r\n        let nameError;\r\n\r\n\r\n        nameError = validateDestination(destination);\r\n\r\n        const errors = { ...this.state.errors };\r\n        errors.destinationError = nameError;\r\n        this.setState({ errors });\r\n\r\n        const vacation = { ...this.state.vacation };\r\n        vacation.destination = destination;\r\n        this.setState({ vacation });\r\n    }\r\n\r\n    private onFileChange = (args: ChangeEvent<HTMLInputElement>) => {\r\n        const file = args.target.files[0];\r\n        if (file) {\r\n            this.setImgUrl(file.name);\r\n            this.setState({ file });\r\n        }\r\n    }\r\n\r\n\r\n    private setImgUrl = (fileName: string) => {\r\n        const img = fileName;\r\n        let nameError;\r\n\r\n        nameError = validateImgUrl(img);\r\n\r\n        const errors = { ...this.state.errors };\r\n        errors.imgError = nameError;\r\n        this.setState({ errors });\r\n\r\n        const vacation = { ...this.state.vacation };\r\n        vacation.img = img;\r\n        this.setState({ vacation });\r\n    }\r\n\r\n    private setStartingDate = (args: ChangeEvent<HTMLInputElement>) => {\r\n        const startingDate = args.target.value;\r\n        let nameError;\r\n\r\n        nameError = validateStartingDate(startingDate);\r\n\r\n        const errors = { ...this.state.errors };\r\n        errors.startingDateError = nameError;\r\n        this.setState({ errors });\r\n\r\n        const vacation = { ...this.state.vacation };\r\n        vacation.startingDate = startingDate;\r\n        this.setState({ vacation });\r\n    }\r\n\r\n    private setEndingDate = (args: ChangeEvent<HTMLInputElement>) => {\r\n        const endingDate = args.target.value;\r\n        let nameError;\r\n\r\n        nameError = validateEndingDate(endingDate);\r\n\r\n        const errors = { ...this.state.errors };\r\n        errors.endingDateError = nameError;\r\n        this.setState({ errors });\r\n\r\n        const vacation = { ...this.state.vacation };\r\n        vacation.endingDate = endingDate;\r\n        this.setState({ vacation });\r\n    }\r\n\r\n\r\n    private setPrice = (args: ChangeEvent<HTMLInputElement>) => {\r\n        const price = +args.target.value;\r\n        let nameError;\r\n\r\n\r\n        nameError = validatePrice(price);\r\n\r\n        const errors = { ...this.state.errors };\r\n        errors.priceError = nameError;\r\n        this.setState({ errors });\r\n\r\n        const vacation = { ...this.state.vacation };\r\n        vacation.price = price;\r\n        this.setState({ vacation });\r\n    }\r\n\r\n    //check if the form is legal\r\n    private isFormLegal() {\r\n        for (const prop in this.state.errors) {\r\n            if (this.state.errors[prop].toString() !== \"\") {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n\r\n\r\n\r\n    //add a new vacation, to database and store, emit, and redirect to /login\r\n    private add = async () => {\r\n\r\n        const vacation = { ...this.state.vacation };\r\n\r\n        const formData = new FormData();\r\n        formData.append(\r\n\r\n            \"file\",\r\n            this.state.file\r\n        );\r\n\r\n        try {\r\n\r\n            //upload vacation image\r\n            await axiosPrivate.post(\"/upload-image\", formData);\r\n\r\n            //add vacation\r\n            const response = await axiosPrivate.post<VacationModel>(\"/api/vacations\",\r\n                vacation);\r\n            const addedVacation = response.data;\r\n\r\n            addedVacation.follows = 0;\r\n            addedVacation.startingDate = StringToJson(addedVacation.startingDate);\r\n            addedVacation.endingDate = StringToJson(addedVacation.endingDate);\r\n\r\n            this.socket.emit(\"Admin-added-a-vacation-from-client\", addedVacation);\r\n            this.props.history.push(\"/admin\");\r\n\r\n        }\r\n        catch (err) {\r\n            errorHandling(err, this.props);\r\n        }\r\n    }\r\n\r\n    //disconnect from the server\r\n    public componentWillUnmount(): void {\r\n        this.socket?.disconnect();\r\n    }\r\n\r\n    public render() {\r\n\r\n        return (\r\n            <div className=\"EditVacation\">\r\n                <NavBar />\r\n                <div className=\"edit-container\">\r\n                    <h1>Add Vacation</h1>\r\n                    <br />\r\n                    <Form.Group controlId=\"formTextDestination\">\r\n                        <Form.Label>Destination</Form.Label>\r\n                        <Form.Control type=\"text\" placeholder=\"Enter destination\" value={this.state.vacation.destination || \"\"} onChange={this.setDestination} />\r\n                        <Form.Text className=\"text-muted\">\r\n                            {this.state.errors.destinationError === \"*\" ? \"\" : this.state.errors.destinationError}\r\n                        </Form.Text>\r\n                    </Form.Group>\r\n\r\n                    <Form.Group controlId=\"formTextDescription\">\r\n                        <Form.Label>Description</Form.Label>\r\n                        <Form.Control type=\"text\" placeholder=\"Enter description\" value={this.state.vacation.description || \"\"} onChange={this.setDescription} />\r\n                        <Form.Text className=\"text-muted\">\r\n                            {this.state.errors.descriptionError === \"*\" ? \"\" : this.state.errors.descriptionError}\r\n                        </Form.Text>\r\n                    </Form.Group>\r\n\r\n                    <Form.Group controlId=\"formFileImage\">\r\n                        <Form.Label>Upload image</Form.Label>\r\n                        <Form.Control type=\"file\" name=\"file\" onChange={this.onFileChange} />\r\n                    </Form.Group>\r\n\r\n                    <Form.Group controlId=\"formStartDate\">\r\n                        <Form.Label>Start Date</Form.Label>\r\n                        <Form.Control type=\"date\" value={this.state.vacation.startingDate || \"\"} onChange={this.setStartingDate} />\r\n                        <Form.Text className=\"text-muted\">\r\n                            {this.state.errors.startingDateError === \"*\" ? \"\" : this.state.errors.startingDateError}\r\n                        </Form.Text>\r\n                    </Form.Group>\r\n\r\n                    <Form.Group controlId=\"formEndingDate\">\r\n                        <Form.Label>Ending Date</Form.Label>\r\n                        <Form.Control type=\"date\" value={this.state.vacation.endingDate || \"\"} onChange={this.setEndingDate} />\r\n                        <Form.Text className=\"text-muted\">\r\n                            {this.state.errors.endingDateError === \"*\" ? \"\" : this.state.errors.endingDateError}\r\n                        </Form.Text>\r\n                    </Form.Group>\r\n\r\n                    <Form.Group controlId=\"formTextPrice\">\r\n                        <Form.Label>Price</Form.Label>\r\n                        <Form.Control type=\"text\" placeholder=\"Enter description\" value={this.state.vacation.price || \"\"} onChange={this.setPrice} />\r\n                        <Form.Text className=\"text-muted\">\r\n                            {this.state.errors.priceError === \"*\" ? \"\" : this.state.errors.priceError}\r\n                        </Form.Text>\r\n                    </Form.Group>\r\n\r\n                    <Button variant=\"primary\" type=\"submit\" disabled={!this.isFormLegal()} onClick={this.add}>\r\n                        Submit\r\n                    </Button >\r\n\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}","import React, { Component } from \"react\";\r\nimport \"./reports.css\";\r\n\r\n//models\r\nimport { VacationModel } from \"../../models/vacation-model\";\r\nimport { FollowModel } from \"../../models/follow-model\";\r\n\r\n//store\r\nimport { Unsubscribe } from \"redux\";\r\nimport { store } from \"../../redux/store\";\r\nimport { ActionType } from \"../../redux/action-type\";\r\n\r\n//components\r\nimport { Bar } from 'react-chartjs-2';\r\nimport NavBar from \"../nav-bar/navBar\";\r\n\r\n//server\r\nimport io from \"socket.io-client\";\r\nimport axiosPrivate from \"../../api/axios\";\r\nimport { Config } from \"../../config\";\r\n\r\n//services\r\nimport { getRandomColor } from \"../../services/color\";\r\nimport { errorHandling, isLoggedIn, isAdmin } from \"../../services/auth\"\r\n\r\n\r\n\r\ninterface reportsState {\r\n    isLoggedIn: boolean;\r\n    vacationsDestinations: Array<string>;\r\n    vacationsFollows: Array<number>;\r\n    colors: Array<string>;\r\n}\r\n\r\nexport class Reports extends Component<any, reportsState>{\r\n\r\n    private socket;\r\n    private unsubscribeStore: Unsubscribe;\r\n\r\n    public constructor(props: any) {\r\n        super(props);\r\n        this.state = {\r\n            isLoggedIn: store.getState().isLoggedIn,\r\n            vacationsDestinations: [],\r\n            vacationsFollows: [],\r\n            colors: []\r\n        }\r\n    }\r\n\r\n\r\n    public async componentDidMount() {\r\n\r\n        if(!isLoggedIn(this.props)) return;\r\n        if(!isAdmin(this.props)) return;\r\n\r\n        //create connection to the server\r\n        this.socket = io.connect(Config.serverUrl);\r\n\r\n        //if is there any changes in the store get the vacations and the follows from the new store.\r\n        this.unsubscribeStore = store.subscribe(() => {\r\n\r\n            const isLoggedIn = store.getState().isLoggedIn;            \r\n            this.setState({ isLoggedIn });\r\n\r\n            if(store.getState().vacations.length>0 && store.getState().follows.length>0){\r\n                this.updateGraphState();\r\n            }\r\n        });\r\n\r\n        this.getComponentData();\r\n\r\n    }\r\n\r\n    private async getComponentData() {\r\n\r\n        let vacations = store.getState().vacations;\r\n        let follows = store.getState().follows;\r\n\r\n        // if the store is empty get the data with ajax\r\n        try {\r\n            if (vacations.length === 0) {\r\n                const response = await\r\n                    axiosPrivate.get<VacationModel[]>(\"/api/vacations\");\r\n                vacations = response.data;\r\n                store.dispatch({ type: ActionType.SaveAllVacations, payload: vacations });\r\n            }\r\n            if (follows.length === 0) {\r\n                const response = await\r\n                    axiosPrivate.get<FollowModel[]>(\"/api/follows\");\r\n                follows = response.data;\r\n                store.dispatch({ type: ActionType.SaveAllFollows, payload: follows });\r\n            }\r\n\r\n            store.dispatch({ type: ActionType.setFollowsPerVacation });\r\n        }\r\n        catch (err) {\r\n            errorHandling(err, this.props);\r\n            return;\r\n        }\r\n\r\n\r\n        this.updateGraphState();\r\n\r\n    }\r\n\r\n    private updateGraphState = () => {\r\n        const vacationsDestinations = [];\r\n        const vacationsFollows = [];\r\n        const colors = [];\r\n\r\n\r\n        store.getState().vacations.forEach(v => {\r\n            if (v.follows > 0) {\r\n                vacationsDestinations.push(v.destination);\r\n                vacationsFollows.push(v.follows);\r\n                colors.push(getRandomColor());\r\n            }\r\n        });\r\n\r\n        this.setState({ vacationsDestinations, vacationsFollows, colors });\r\n    }\r\n\r\n\r\n    //disconnect from the server and the store\r\n    public componentWillUnmount(): void {\r\n        this.unsubscribeStore?.();\r\n        this.socket?.disconnect();\r\n    } \r\n\r\n\r\n    public render() {\r\n        return (\r\n\r\n            <div className=\"reports\">\r\n                <NavBar />\r\n                <br></br>\r\n                <Bar\r\n                    data={\r\n                        {\r\n                            labels: this.state.vacationsDestinations,\r\n                            datasets: [\r\n                                {\r\n                                    label: 'Follows',\r\n                                    data: this.state.vacationsFollows,\r\n                                    backgroundColor: this.state.colors\r\n                                }\r\n                            ]\r\n                        }\r\n                    }\r\n                    options={{\r\n                        scales: {\r\n                            yAxes: [{\r\n                                ticks: {\r\n                                    beginAtZero: true,\r\n                                    userCallback: function (label, index, labels) {\r\n                                        // when the floored value is the same as the value we have a whole number\r\n                                        if (Math.floor(label) === label) {\r\n                                            return label;\r\n                                        }\r\n\r\n                                    },\r\n                                }\r\n                            }]\r\n                        }\r\n                    }}\r\n                />\r\n\r\n\r\n            </div>\r\n        )\r\n    }\r\n\r\n}","export function getRandomColor(){\r\n    const r=Math.floor(Math.random()*255);\r\n    const g=Math.floor(Math.random()*255);\r\n    const b=Math.floor(Math.random()*255);\r\n\r\n    return `rgba(${r},${g},${b},0.5)`;\r\n    \r\n}","import React, { Component, ChangeEvent } from \"react\";\r\nimport \"./purchase.css\";\r\n\r\n//models\r\nimport { VacationModel } from \"../../models/vacation-model\";\r\nimport { PurchaseModel } from \"../../models/purchase-model\";\r\n\r\n//server\r\nimport axiosPrivate from \"../../api/axios\";\r\nimport io from \"socket.io-client\";\r\nimport { Config } from \"../../config\";\r\n\r\n//store\r\nimport { Unsubscribe } from \"redux\";\r\nimport { store } from \"../../redux/store\";\r\n\r\n//components\r\nimport NavBar from \"../nav-bar/navBar\";\r\nimport Card from 'react-bootstrap/Card';\r\nimport Button from 'react-bootstrap/Button';\r\n\r\n//services\r\nimport { JsonToString } from \"../../services/date\";\r\nimport { errorHandling, isLoggedIn } from \"../../services/auth\"\r\n\r\ninterface VacationState {\r\n    vacations: VacationModel[];\r\n    purchase: PurchaseModel;\r\n    vacation: VacationModel;\r\n    isLoggedIn: boolean;\r\n    errors: {\r\n        descriptionError: string,\r\n        destinationError: string,\r\n        imgError: string,\r\n        startingDateError: string,\r\n        endingDateError: string,\r\n        priceError: string\r\n    };\r\n}\r\n\r\nexport class Purchase extends Component<any, VacationState>{\r\n\r\n    private unsubscribeStore: Unsubscribe;\r\n    private socket;\r\n\r\n    public constructor(props: any) {\r\n        super(props);\r\n\r\n        //get vacations, and login status from the store\r\n        this.state = {\r\n            vacations: store.getState().vacations,\r\n            purchase: {},\r\n            vacation: {},\r\n            isLoggedIn: store.getState().isLoggedIn,\r\n            errors: { descriptionError: \"\", destinationError: \"\", imgError: \"\", startingDateError: \"\", endingDateError: \"\", priceError: \"\" }\r\n        };\r\n\r\n    }\r\n\r\n\r\n    public async componentDidMount() {\r\n\r\n        if(!isLoggedIn(this.props)) return;\r\n\r\n        //create connection to the server\r\n        this.socket = io.connect(Config.serverUrl);\r\n\r\n        //if is there any changes in the store get the vacations from the new store.\r\n        this.unsubscribeStore = store.subscribe(() => {\r\n            const vacations = store.getState().vacations;\r\n            this.setState({ vacations });\r\n        });\r\n\r\n        this.getComponentData();\r\n    }\r\n\r\n\r\n\r\n    private getComponentData = async () => {\r\n\r\n        let vacation;\r\n\r\n        //if the store is not empty, find the purchase and don't use axios at all\r\n        if (this.state.vacations.length > 0) {\r\n\r\n            for (let v of this.state.vacations) {\r\n                if (v.vacationId === +this.props.match.params.id) {\r\n                    vacation = ({ ...v });\r\n                }\r\n            }\r\n        }\r\n\r\n        // if the store is empty, get the vacation for edit with axios\r\n        else {\r\n            try {\r\n                const response = await\r\n                    axiosPrivate.get<VacationModel>(`/api/vacations/${+this.props.match.params.id}`);\r\n                vacation = response.data;\r\n            }\r\n\r\n            catch (err) {\r\n                errorHandling(err, this.props);\r\n            }\r\n        }\r\n\r\n        //treatment with json date format\r\n        vacation.startingDate = JsonToString(vacation.startingDate);\r\n        vacation.endingDate = JsonToString(vacation.endingDate);\r\n        this.setState({ vacation });\r\n\r\n\r\n        const purchase = { ...this.state.purchase };\r\n        purchase.vacationId = vacation.vacationId;\r\n        purchase.userName = store.getState().user.userName;\r\n        purchase.priceForTicket = vacation.price;\r\n        this.setState({ purchase });\r\n    }\r\n\r\n\r\n    private setAmountOfTickets = (args: ChangeEvent<HTMLInputElement>) => {\r\n\r\n        const purchase = { ...this.state.purchase };\r\n        purchase.tickets = +args.target.value;\r\n        purchase.totalPrice = purchase.tickets * this.state.vacation.price;\r\n\r\n        this.setState({ purchase });\r\n\r\n    }\r\n\r\n    private isFormLegal() {\r\n        if (this.state.purchase.totalPrice <= 0) {\r\n            return false;\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n\r\n    private send = async () => {\r\n        const dateNow = new Date();\r\n        let purchase = { ...this.state.purchase };\r\n        purchase.date = dateNow;\r\n\r\n        try {\r\n            const response = await axiosPrivate.post<PurchaseModel>(\"/api/purchases\",\r\n                purchase);\r\n            purchase = response.data;\r\n            this.socket.emit(\"user-added-a-purchase-from-client\", purchase);\r\n\r\n            this.props.history.push(\"/\");\r\n\r\n        }\r\n        catch (err) {\r\n            console.log(err);\r\n            errorHandling(err, this.props);\r\n        }\r\n\r\n    }\r\n\r\n    //disconnect from the store\r\n    public componentWillUnmount(): void {\r\n        this.unsubscribeStore?.();\r\n        this.socket?.disconnect();\r\n    }\r\n\r\n    public render() {\r\n        return (\r\n            <div className=\"purchaseVacation\">\r\n                <NavBar />\r\n                <div className=\"card-container\">\r\n                    <Card className=\"card-purchase\">\r\n                        <Card.Header >\r\n                            <div className=\"header\">\r\n                                <img className=\"img\" alt=\"vacation\" src={`${Config.serverUrl}/assets/images/vacations/${this.state.vacation.img}`} />\r\n                                <span className=\"destination\">{this.state.vacation.destination || \"\"}</span>\r\n                            </div>\r\n                        </Card.Header>\r\n                        <Card.Body>\r\n                            <Card.Title>Description:</Card.Title>\r\n                            <Card.Text>\r\n                                {this.state.vacation.description || \"\"}\r\n                            </Card.Text>\r\n                            <Card.Title>Vacation Date:</Card.Title>\r\n                            <Card.Text>\r\n                                From {new Date(this.state.vacation.startingDate).toDateString()} to  {new Date(this.state.vacation.endingDate).toDateString()}\r\n                            </Card.Text>\r\n                            <Card.Title>One ticket cost:</Card.Title>\r\n                            <Card.Text>\r\n                                {this.state.vacation.price || \"\"}$\r\n                            </Card.Text>\r\n                        </Card.Body>\r\n                        <Card.Header >\r\n                            <h2>Purchase</h2>\r\n                        </Card.Header>\r\n                        <Card.Body>\r\n                            <Card.Text>\r\n                                Number Of tickets: <input type=\"text\" pattern=\"[0-9]*\" onInput={this.setAmountOfTickets.bind(this)} value={this.state.purchase.tickets} />\r\n                            </Card.Text>\r\n                            <Card.Text>\r\n                                Total price: {this.state.purchase.totalPrice || \"\"}$\r\n                            </Card.Text>\r\n                            <Card.Text>\r\n                                <Button variant=\"primary\" type=\"submit\" disabled={!this.isFormLegal()} onClick={this.send} >\r\n                                    Buy\r\n                                </Button >\r\n                            </Card.Text>\r\n                        </Card.Body>\r\n\r\n                    </Card>\r\n                </div>\r\n\r\n\r\n            </div>\r\n        );\r\n    }\r\n}","import React, { Component } from \"react\";\r\nimport \"./purchases.css\";\r\n\r\n//server\r\nimport axiosPrivate from \"../../api/axios\";\r\nimport io from \"socket.io-client\";\r\nimport { Config } from \"../../config\";\r\n\r\n//store\r\nimport { Unsubscribe } from \"redux\";\r\nimport { store } from \"../../redux/store\";\r\nimport { ActionType } from \"../../redux/action-type\";\r\n\r\n//components\r\nimport NavBar from \"../nav-bar/navBar\";\r\nimport Table from 'react-bootstrap/Table';\r\n\r\n//models\r\nimport { VacationModel } from \"../../models/vacation-model\";\r\nimport { PurchaseModel } from \"../../models/purchase-model\";\r\n\r\n//services\r\nimport { errorHandling, isAdmin, isLoggedIn } from \"../../services/auth\"\r\n\r\n\r\n\r\ninterface PurchaseState {\r\n    purchases: PurchaseModel[];\r\n    isLoggedIn: boolean;\r\n}\r\n\r\nexport class Purchases extends Component<any, PurchaseState>{\r\n\r\n    private unsubscribeStore: Unsubscribe;\r\n    private socket;\r\n\r\n    public constructor(props: any) {\r\n        super(props);\r\n\r\n        //get purchases, vacations, and login status from the store\r\n        this.state = {\r\n            purchases: store.getState().purchases,\r\n            isLoggedIn: store.getState().isLoggedIn\r\n        };\r\n\r\n    }\r\n\r\n\r\n    public componentDidMount() {\r\n\r\n        if(!isLoggedIn(this.props)) return;\r\n        if(!isAdmin(this.props)) return;\r\n\r\n        //create connection to the server\r\n        this.socket = io.connect(Config.serverUrl);\r\n\r\n        //if is there any changes in the store get the vacations from the new store.\r\n        this.unsubscribeStore = store.subscribe(() => {\r\n\r\n            const purchases = store.getState().purchases;\r\n            this.setState({ purchases });\r\n        });\r\n\r\n        this.getComponentDataWithAxios();\r\n\r\n    }\r\n\r\n    private getComponentDataWithAxios = async () => {\r\n        try {\r\n\r\n            //if the store is empty, get vacations and purchases data.\r\n\r\n            if (store.getState().vacations.length === 0) {\r\n                const response = await\r\n                    axiosPrivate.get<VacationModel[]>(`/api/vacations`);\r\n                const vacations = response.data;\r\n                store.dispatch({ type: ActionType.SaveAllVacations, payload: vacations });\r\n            }\r\n\r\n            if (store.getState().purchases.length === 0) {\r\n                const response = await\r\n                    axiosPrivate.get<PurchaseModel[]>(`/api/purchases`);\r\n                const purchases = response.data;\r\n\r\n                purchases.forEach(p => {\r\n                    p.vacation = store.getState().vacations.find(v => v.vacationId === p.vacationId);\r\n                });\r\n\r\n                store.dispatch({ type: ActionType.saveAllPurchases, payload: purchases });\r\n            }\r\n        }\r\n\r\n        catch (err) {\r\n            errorHandling(err, this.props);\r\n        }\r\n    }\r\n\r\n    //disconnect from the server and the store\r\n    public componentWillUnmount(): void {\r\n        this.unsubscribeStore?.();\r\n        this.socket?.disconnect();\r\n    }\r\n\r\n\r\n\r\n    public render() {\r\n        return (\r\n            <div className=\"purchases\">\r\n                <NavBar />\r\n\r\n                <div className=\"table-container\">\r\n                    <h1>Purchases</h1>\r\n                    <br />\r\n                    <Table striped bordered hover>\r\n                        <thead>\r\n                            <tr>\r\n                                <th>User Name</th>\r\n                                <th>Number of Tickets</th>\r\n                                <th>Total price</th>\r\n                                <th>Vacation</th>\r\n                                <th>Date</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {this.state.purchases ? this.state.purchases.map(p =>\r\n\r\n                                <tr key={p.purchaseId}>\r\n                                    <td>{p.userName}</td>\r\n                                    <td>{p.tickets}</td>\r\n                                    <td>{p.totalPrice}$</td>\r\n                                    <td>{p.vacation.destination}</td>\r\n                                    <td>{new Date(p.date).toDateString()}</td>\r\n                                </tr>\r\n\r\n                            ) : \"\"}\r\n                        </tbody>\r\n                    </Table>\r\n\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}","import React, { Component } from \"react\";\r\nimport \"./app.css\";\r\n\r\nimport { BrowserRouter, Switch, Route } from \"react-router-dom\";\r\n\r\n//components\r\nimport { Home } from \"../home/home\"\r\nimport { Registration } from \"../registration/registration\";\r\nimport { Login } from \"../login/login\";\r\nimport { Admin } from \"../admin/admin\";\r\nimport { EditVacation } from \"../edit-vacation/editVacation\";\r\nimport { AddVacation } from \"../add-vacation/addVacation\";\r\nimport { Reports } from \"../reports/reports\";\r\nimport { Purchase } from \"../purchase/purchase\";\r\nimport { Purchases } from \"../purchases/purchases\";\r\n\r\n//store\r\nimport { store } from \"../../redux/store\";\r\nimport { ActionType } from \"../../redux/action-type\";\r\n\r\n//server\r\nimport axiosPrivate from \"../../api/axios\";\r\nimport axios from \"../../api/axios\";\r\nimport { Config } from \"../../config\";\r\nimport io from \"socket.io-client\";\r\n\r\n//models\r\nimport { PurchaseModel } from \"../../models/purchase-model\";\r\n\r\n\r\n\r\nexport class App extends Component<any>{\r\n\r\n    private socket;\r\n    private axiosPrivate = axiosPrivate;\r\n\r\n    public constructor(props: any) {\r\n        super(props);\r\n\r\n        if(this.axiosPrivate.interceptors.request[\"handlers\"].length===0){\r\n            this.axiosPrivate.interceptors.request.use(this.reqInterceptor);\r\n            this.axiosPrivate.interceptors.response.use(this.resInterceptor,this.resErrInterceptor);\r\n        }\r\n    }\r\n\r\n\r\n    private reqInterceptor = req => {\r\n\r\n        if (!req.headers['authorization']) {\r\n            req.headers[\"authorization\"] = `Bearer ${store.getState().token}`;\r\n        }\r\n        // console.log(\"req\");\r\n        // console.log(req);\r\n        return req;\r\n    }\r\n\r\n    private resInterceptor = res => {\r\n        // console.log(\"res\");\r\n        // console.log(res);\r\n        return res;\r\n    }\r\n\r\n    private resErrInterceptor = async err => {\r\n        // console.log(\"response err\");\r\n        // console.log(err);\r\n        // console.log(\"err?.response?.data\");\r\n        // console.log(err?.response?.data);\r\n        // console.log(\"err?.config = req\");\r\n        console.log(err?.config);\r\n        console.log(err?.config.url);\r\n\r\n\r\n        const prevRequest = err?.config;\r\n        // console.log(\"err?.response?.status\");\r\n        // console.log(err?.response?.status);\r\n        // if(err?.response?.status === 403 || 401 && !prevRequest?.sent){\r\n        if (err?.config.url!==\"/api/auth/refresh\" && (err?.response?.data === \"You are not logged-in\" || err?.response?.data === \"Your login session has expired\")) {\r\n            //try to get access token\r\n            // prevRequest.sent = true;\r\n            try {\r\n                console.log(\"refresh\");\r\n                const response = await axiosPrivate.get(\"/api/auth/refresh\", { withCredentials: true });\r\n                console.log(\"after refresh\");\r\n                const newAccessToken = response.data.accessToken;\r\n                store.dispatch({ type: ActionType.saveToken, payload: newAccessToken });\r\n                prevRequest.headers[\"authorization\"] = `Bearer ${newAccessToken}`;\r\n                return axios(prevRequest);\r\n            } catch (error) {\r\n                // console.log(\"req error\");\r\n                // console.log(err);\r\n                // console.log(err?.response?.data);\r\n                // console.log(\"refresh error\");\r\n                // console.log(error);\r\n                // console.log(error?.response?.data);\r\n                throw error;\r\n            }\r\n\r\n        }\r\n        throw err;\r\n    }\r\n\r\n    public componentDidMount() {\r\n        console.log(\"app componentDidMount\");\r\n\r\n        //create connection to the server\r\n        this.socket = io.connect(Config.serverUrl);\r\n\r\n        //listen to actions from the server\r\n        this.socket.on(\"Admin-updated-a-vacation-from-server\", vacationUpdated => {\r\n            if (store.getState().vacations.length > 0)\r\n                store.dispatch({ type: ActionType.saveOneVacation, payload: vacationUpdated });\r\n        });\r\n\r\n        this.socket.on(\"added-vacation-from-server\", vacationAdded => {\r\n            if (store.getState().vacations.length > 0)\r\n                store.dispatch({ type: ActionType.addOneVacation, payload: vacationAdded });\r\n        });\r\n\r\n        this.socket.on(\"removed-vacation-from-server\", vacationRemoved => {\r\n            if (store.getState().vacations.length > 0)\r\n                store.dispatch({ type: ActionType.deleteOneVacation, payload: vacationRemoved });\r\n        });\r\n\r\n        this.socket.on(\"follow-added-from-server\", followAdded => {\r\n            if (store.getState().vacations.length > 0 && store.getState().follows.length > 0) {\r\n                store.dispatch({ type: ActionType.AddFollow, payload: followAdded });\r\n                store.dispatch({ type: ActionType.setFollowsPerVacation });\r\n                store.dispatch({ type: ActionType.sortVacations });\r\n            }\r\n        });\r\n\r\n        this.socket.on(\"follow-removed-from-server\", followId => {\r\n            if (store.getState().vacations.length > 0 && store.getState().follows.length > 0) {\r\n                store.dispatch({ type: ActionType.RemoveFollow, payload: followId });\r\n                store.dispatch({ type: ActionType.setFollowsPerVacation });\r\n                store.dispatch({ type: ActionType.sortVacations });\r\n            }\r\n        });\r\n\r\n        this.socket.on(\"purchase-added-from-server\", (purchase: PurchaseModel) => {\r\n            if (store.getState().vacations.length > 0 && store.getState().purchases.length > 0) {\r\n                purchase.vacation = store.getState().vacations.find(v => v.vacationId === purchase.vacationId);\r\n                store.dispatch({ type: ActionType.addPurchase, payload: purchase });\r\n            }\r\n        });\r\n\r\n\r\n\r\n    }\r\n\r\n    //disconnect from the server\r\n    public componentWillUnmount(): void {\r\n        console.log(\"componentWillUnmount\");\r\n        this.socket?.disconnect();\r\n    }\r\n\r\n    public render() {\r\n        return (\r\n            <div className=\"layout\">\r\n                <BrowserRouter>\r\n                    <Switch>\r\n                        <Route\r\n                            exact\r\n                            path={\"/\"}\r\n                            render={props => (\r\n                                <Home\r\n                                    {...props} key={\"layout\"}\r\n                                />\r\n                            )}\r\n                        />\r\n                        <Route\r\n                            exact\r\n                            path={\"/login\"} key={\"login\"}\r\n                            render={props => (\r\n                                <Login\r\n                                    {...props}\r\n                                />\r\n                            )}\r\n                        />\r\n                        <Route\r\n                            exact\r\n                            path={\"/registration\"} key={\"registration\"}\r\n                            render={props => (\r\n                                <Registration\r\n                                    {...props}\r\n                                />\r\n                            )}\r\n                        />\r\n                        <Route\r\n                            exact\r\n                            path={\"/purchase/:id\"} key={\"purchase\"}\r\n                            render={props => (\r\n                                <Purchase\r\n                                    {...props}\r\n                                />\r\n                            )}\r\n                        />\r\n                        <Route\r\n                            exact\r\n                            path={\"/purchases\"} key={\"purchases\"}\r\n                            render={props => (\r\n                                <Purchases\r\n                                    {...props}\r\n                                />\r\n                            )}\r\n                        />\r\n                        <Route\r\n                            exact\r\n                            path={\"/admin\"} key={\"registration\"}\r\n                            render={props => (\r\n                                <Admin\r\n                                    {...props}\r\n                                />\r\n                            )}\r\n                        />\r\n                        <Route\r\n                            exact\r\n                            path={\"/admin/add\"} key={\"add\"}\r\n                            render={props => (\r\n                                <AddVacation\r\n                                    {...props}\r\n                                />\r\n                            )}\r\n                        />\r\n                        <Route\r\n                            exact\r\n                            path={\"/admin/:id\"} key={\"edit\"}\r\n                            render={props => (\r\n                                <EditVacation\r\n                                    {...props}\r\n                                />\r\n                            )}\r\n                        />\r\n                        <Route\r\n                            exact\r\n                            path={\"/reports\"} key={\"reports\"}\r\n                            render={props => (\r\n                                <Reports\r\n                                    {...props}\r\n                                />\r\n                            )}\r\n                        />\r\n                    </Switch>\r\n                </BrowserRouter>\r\n            </div>\r\n        );\r\n    }\r\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport './index.css';\nimport * as serviceWorker from './serviceWorker';\nimport { App } from './components/app/app';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}